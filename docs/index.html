<h1 id="the-jack-programming-language">The Jack Programming Language</h1>
<h2 id="compiler-and-virtual-machine">Compiler and Virtual Machine</h2>
<p>[toc]</p>
<h3 id="the-jack-language">The Jack Language</h3>
<p>Jack is an educational programming language created by <a href="https://shimonschocken.com">Shimon Schocken</a> and <a href="https://en.wikipedia.org/wiki/Noam_Nisan">Noam Nisan</a> for the course <em>The Elements of Computing Systems</em>, also known as <a href="https://nand2tetris.org">Nand2Tetris</a>, offered by <a href="https://en.wikipedia.org/wiki/Hebrew_University_of_Jerusalem">The Hebrew University of Jerusalem</a>. Students are asked to build their own compilers for this object-oriented language.</p>
<h3 id="compilation">Compilation</h3>
<p>The Jack language is compiled in a two-tier process: <img src="./compilation.png" alt="Two tier compilation process. from the book Compilers: Principles, Techniques and tools" /></p>
<p>The code is first translated to an intermediate program (like Java’s <em>bytecode</em> and C#’s <em>Intermediate Language</em>) and then a Virtual Machine Translator finishes the compilation process either by interpreting the VM code or by translating to the target’s machine assembly language.</p>
<h3 id="build-linux-only">Build (Linux Only)</h3>
<p>On the parent directory:</p>
<pre class="console"><code>$ sudo ./install.sh </code></pre>
<h3 id="compilation-1">Compilation</h3>
<h4 id="compile-from-jack-to-vm">Compile from Jack to VM</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1">$ <span class="ex">./dcc</span> <span class="op">&lt;</span>path<span class="op">&gt;</span></a></code></pre></div>
<h4 id="interpret-the-vm-code">Interpret the VM code</h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1">$<span class="ex">./jack</span> <span class="op">&lt;</span>path<span class="op">&gt;</span></a></code></pre></div>
<h3 id="hello-world">Hello, World</h3>
<p>Hello world program in Jack</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">class</span> Main <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="kw">function</span> int <span class="at">main</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">        <span class="cf">do</span> <span class="va">Output</span>.<span class="at">printf</span>(<span class="st">&quot;Hello, World!</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5">    <span class="op">}</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="op">}</span></a></code></pre></div>
<p>Save the file as Main.jack and run</p>
<pre class="console"><code>$ dcc .</code></pre>
<p>This will compile all source files in the current folder. Run</p>
<pre class="console"><code>$ jack .</code></pre>
<p>To interpret the VM files produced in the current folder</p>
<p>Output:</p>
<pre class="console"><code>Hello, World!</code></pre>
<h3 id="features">Features</h3>
<p>Jack is a Turing-complete, object-oriented language, with most of the features that any modern language has, such as branching, loops, assignments, arrays, classes, methods, arithmetic operations and more.</p>
<h3 id="syntax">Syntax</h3>
<p>Jack has a C-like syntax. Reserved words in Jack are:</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">this</td>
<td style="text-align: left;">field</td>
</tr>
<tr class="even">
<td style="text-align: left;">static</td>
<td style="text-align: left;">constructor</td>
</tr>
<tr class="odd">
<td style="text-align: left;">method</td>
<td style="text-align: left;">function</td>
</tr>
<tr class="even">
<td style="text-align: left;">int</td>
<td style="text-align: left;">char</td>
</tr>
<tr class="odd">
<td style="text-align: left;">boolean</td>
<td style="text-align: left;">var</td>
</tr>
<tr class="even">
<td style="text-align: left;">let</td>
<td style="text-align: left;">do</td>
</tr>
<tr class="odd">
<td style="text-align: left;">while</td>
<td style="text-align: left;">if</td>
</tr>
<tr class="even">
<td style="text-align: left;">else</td>
<td style="text-align: left;">return</td>
</tr>
<tr class="odd">
<td style="text-align: left;">true</td>
<td style="text-align: left;">false</td>
</tr>
<tr class="even">
<td style="text-align: left;">null</td>
<td style="text-align: left;">void</td>
</tr>
</tbody>
</table>
<h3 id="arrays">Arrays</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">class</span> Main <span class="op">{</span></a>
<a class="sourceLine" id="cb8-3" title="3">    <span class="kw">function</span> int <span class="at">main</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb8-4" title="4">        <span class="kw">var</span> Array a<span class="op">;</span></a>
<a class="sourceLine" id="cb8-5" title="5"></a>
<a class="sourceLine" id="cb8-6" title="6">        <span class="kw">let</span> a <span class="op">=</span> <span class="va">Array</span>.<span class="at">new</span>(<span class="dv">392</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">29</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">9</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-7" title="7">        <span class="cf">do</span> <span class="va">a</span>.<span class="at">sort</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-8" title="8"></a>
<a class="sourceLine" id="cb8-9" title="9">        <span class="cf">do</span> <span class="va">Output</span>.<span class="at">printf</span>(<span class="st">&quot;%s is %i elements long.</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="va">a</span>.<span class="at">to_s</span>()<span class="op">,</span> <span class="va">a</span>.<span class="at">length</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb8-10" title="10">        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-11" title="11">    <span class="op">}</span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="op">}</span></a></code></pre></div>
<h4 id="output">Output</h4>
<pre class="console"><code>[3,9,29,32,392] is 5 elements long
</code></pre>
<h3 id="object-oriented-features">Object Oriented features</h3>
<p>In Dog.jack:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">class</span> Dog <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3">    field int weight<span class="op">;</span></a>
<a class="sourceLine" id="cb10-4" title="4">    field String name<span class="op">;</span></a>
<a class="sourceLine" id="cb10-5" title="5"></a>
<a class="sourceLine" id="cb10-6" title="6">    constructor Dog <span class="kw">new</span>(int w<span class="op">,</span> String n) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-7" title="7">        <span class="kw">let</span> weight <span class="op">=</span> w<span class="op">;</span></a>
<a class="sourceLine" id="cb10-8" title="8">        <span class="kw">let</span> name <span class="op">=</span> n<span class="op">;</span>  </a>
<a class="sourceLine" id="cb10-9" title="9">        <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-10" title="10">    <span class="op">}</span></a>
<a class="sourceLine" id="cb10-11" title="11"></a>
<a class="sourceLine" id="cb10-12" title="12">    method <span class="kw">void</span> <span class="at">bark</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb10-13" title="13">        <span class="kw">var</span> String bark<span class="op">;</span></a>
<a class="sourceLine" id="cb10-14" title="14"></a>
<a class="sourceLine" id="cb10-15" title="15">        <span class="cf">if</span> (weight <span class="op">&lt;</span> <span class="dv">20</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-16" title="16">            <span class="kw">let</span> bark <span class="op">=</span> <span class="st">&quot;woof, woof&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-17" title="17">        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-18" title="18">            <span class="kw">let</span> bark <span class="op">=</span> <span class="st">&quot;WOOF, WOOF&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-19" title="19">        <span class="op">}</span></a>
<a class="sourceLine" id="cb10-20" title="20"></a>
<a class="sourceLine" id="cb10-21" title="21">        <span class="cf">do</span> <span class="va">Output</span>.<span class="at">printf</span>(<span class="st">&quot;%s says %s!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> name<span class="op">,</span> bark)<span class="op">;</span> </a>
<a class="sourceLine" id="cb10-22" title="22"></a>
<a class="sourceLine" id="cb10-23" title="23">        <span class="cf">return</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-24" title="24"></a>
<a class="sourceLine" id="cb10-25" title="25">    <span class="op">}</span></a>
<a class="sourceLine" id="cb10-26" title="26"><span class="op">}</span></a></code></pre></div>
<p>In Main.jack:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">class</span> Main <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3">    <span class="kw">function</span> <span class="kw">void</span> <span class="at">main</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb11-4" title="4">        <span class="kw">var</span> Dog codie<span class="op">,</span> fido<span class="op">;</span></a>
<a class="sourceLine" id="cb11-5" title="5"></a>
<a class="sourceLine" id="cb11-6" title="6">        <span class="kw">let</span> codie <span class="op">=</span> <span class="va">Dog</span>.<span class="at">new</span>(<span class="dv">24</span><span class="op">,</span> <span class="st">&quot;Codie&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-7" title="7">        <span class="kw">let</span> fido <span class="op">=</span> <span class="va">Dog</span>.<span class="at">new</span>(<span class="dv">12</span><span class="op">,</span> <span class="st">&quot;Fido&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-8" title="8">        <span class="cf">do</span> <span class="va">codie</span>.<span class="at">bark</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb11-9" title="9">        <span class="cf">do</span> <span class="va">fido</span>.<span class="at">bark</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb11-10" title="10">        <span class="cf">return</span><span class="op">;</span></a>
<a class="sourceLine" id="cb11-11" title="11">    <span class="op">}</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="op">}</span></a></code></pre></div>
<h4 id="compile-run">Compile &amp;&amp; Run</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb12-1" title="1">$<span class="ex">./dcc</span> .</a>
<a class="sourceLine" id="cb12-2" title="2">$<span class="ex">./jack</span> .</a></code></pre></div>
<h4 id="output-1">Output</h4>
<pre><code>Codie says WOOF, WOOF!
Fido says woof, woof!</code></pre>
